
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="referrer" content="never" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <title>哔哩哔哩BV号AV号互转</title>
    <link href="https://cdn.bootcss.com/twitter-bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/twitter-bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <link href="https://cdn.bootcss.com/jquery-confirm/3.3.4/jquery-confirm.min.css" rel="stylesheet" />
    <script src="https://cdn.bootcss.com/jquery-confirm/3.3.4/jquery-confirm.min.js"></script>
    <style>
        html, table {
            font-size: 15px;
        }
    </style>
    <script type="text/javascript">
        function zanzhu() {
            $.alert({
                theme: 'Modern',
                boxWidth: '800px',
                useBootstrap: false,
                backgroundDismiss: true,
                title: '捐助我们',
                content: '' +
                    '<form action="" class="formName">' +
                    '<img style="width:1000px;" src="https://image.suning.cn/uimg/ZR/share_order/159357423582846643.jpg" />' +
                    '</form>',
            });
        }
    </script>
</head>
<body>
    <nav class="navbar navbar-expand-sm navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="/" style="text-decoration: none;">滑稽社哔哩哔哩解析</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbar">
                <div class="navbar-nav ml-auto">
                    <li class="nav-item "><a style="text-decoration: none;" class="nav-item nav-link px-3" target="_blank" title="Telegram" href="https://t.me/Healer_007"></a></li>
                    <li class="nav-item "><a style="text-decoration: none;" class="nav-item nav-link px-3" title="捐助我们" href="javascript:void(0);" onclick="zanzhu();"></a></li>
                </div>
            </div>
        </div>
    </nav>
    <div class="jumbotron" style="text-align:center;">
        <h1>哔哩哔哩 BV ⇆ AV</h1>
        <h2>记得av号转换时先输入av再输入具体号码</h2>
    </div>
    <div class="container" style="text-align: center;">
        <form action="">
            <input type="text" id="x" name="BV" placeholder="在此处输入哔哩哔哩的AV/BV号" value="" class="form-control" style="text-align:center">
            <br />
            <button type="button" class="btn btn-primary" onclick="return exchange() &amp;&amp; false">一键转换</button>
        </form>

        <script>
            const table = [...'fZodR9XQDSUm21yCkr6zBqiveYah8bt4xsWpHnJE7jL5VG3guMTKNPAwcF'];
            const s = [11, 10, 3, 8, 4, 6];
            const xor = 177451812;
            const add = 8728348608;

            const av2bv = (av) => {
                let num = NaN;
                if (Object.prototype.toString.call(av) === '[object Number]') {
                    num = av;
                } else if (Object.prototype.toString.call(av) === '[object String]') {
                    num = parseInt(av.replace(/[^0-9]/gu, ''));
                };
                if (isNaN(num) || num <= 0) {
                    return '¿你在想桃子?';
                };

                num = (num ^ xor) + add;
                let result = [...'bv1  4 1 7  '];
                let i = 0;
                while (i < 6) {

                    result[s[i]] = table[Math.floor(num / 58 ** i) % 58];
                    i += 1;
                };
                return result.join('');
            };

            const bv2av = (bv) => {
                let str = '';
                if (bv.length === 12) {
                    str = bv;
                } else if (bv.length === 10) {
                    str = `BV${bv}`;

                } else if (bv.length === 9) {
                    str = `BV1${bv}`;
                } else {
                    return '¿你在想桃子?';
                };
                if (!str.match(/[Bb][Vv][fZodR9XQDSUm21yCkr6zBqiveYah8bt4xsWpHnJE7jL5VG3guMTKNPAwcF]{10}/gu)) {
                    return '¿你在想桃子?';
                };

                let result = 0;
                let i = 0;
                while (i < 6) {
                    result += table.indexOf(str[s[i]]) * 58 ** i;
                    i += 1;
                };
                return `av${result - add ^ xor}`;
            };


            const exchange = () => {
                var x = document.getElementById('x').value;
                if (x.substring(0, 2).toLowerCase() == 'bv') {
                    document.getElementById('x').value = `${bv2av(x)}`;
                } else if (x.substring(0, 2).toLowerCase() == 'av') {
                    document.getElementById('x').value = `${av2bv(x)}`;
                }
            };
        </script>
    </div>
<br />
<br />
<br />
<br />

    <footer class="text-muted bg-dark py-4 mt-3">
        <div style="text-align:center">
            <p>本站资源来源于网络，仅用于内部学习交流，禁止用于非法用途；请在下载后24小时之内删除，否则后果自负。Email：huajishe@gmail.com</p>
            <script type="text/javascript" src="https://js.users.51.la/21011093.js"></script>
        </div>
    </footer>
</body>
</html>